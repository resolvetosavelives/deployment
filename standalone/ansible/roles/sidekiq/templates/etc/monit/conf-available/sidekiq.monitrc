check process {{ sidekiq_service_name }}
with pidfile /home/deploy/apps/simple-server/current/tmp/pids/sidekiq.pid
start program = "/bin/su - {{ deploy_user }} -c 'cd /home/deploy/apps/simple-server/current && RAILS_ENV=production bundle exec sidekiq -e production -C /home/deploy/apps/simple-server/current/config/sidekiq.yml -P tmp/pids/sidekiq.pid -L log/sidekiq.log'" with timeout 30 seconds
stop program = "/bin/bash -c 'kill -s INT `cat /path/to/shared/tmp/pids/sidekiq.pid`'" with timeout 90 seconds
group sidekiq
